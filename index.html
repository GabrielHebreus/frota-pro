<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrotaPro - Gest√£o de Frota</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.4.0/exceljs.min.js"></script>
</head>

<body>
    <!-- Modal de Autentica√ß√£o -->
    <div id="authModal" class="modal active">
        <div class="modal-content auth-modal">
            <div class="modal-header">
                <h3>üîê Acesso ao Sistema</h3>
            </div>
            <div class="modal-body">
                <div class="auth-container">
                    <div class="auth-icon">üöõ</div>
                    <h2>FrotaPro</h2>
                    <p class="auth-subtitle">Sistema de Gest√£o de Frota Log√≠stica</p>

                    <form id="loginForm" class="auth-form">
                        <div class="form-group">
                            <label for="username">Usu√°rio</label>
                            <input type="text" id="username" placeholder="Digite seu usu√°rio" required
                                class="modern-input">
                        </div>
                        <div class="form-group">
                            <label for="password">Senha</label>
                            <input type="password" id="password" placeholder="Digite sua senha" required
                                class="modern-input">
                        </div>
                        <button type="submit" class="btn btn-primary full-width">
                            <span class="btn-icon">üîë</span>
                            Entrar no Sistema
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">üöõ</div>
                    <div class="logo-text">
                        <span class="logo-title">FrotaPro</span>
                        <span class="logo-subtitle">Sua frota no caminho certo</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-section="carregamentos">
                    <span class="nav-icon">üì¶</span>
                    <span class="nav-text">Carregamentos</span>
                    <span class="nav-badge" id="carregamentosCount">0</span>
                </a>
                <a href="#" class="nav-item" data-section="motoristas">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">Motoristas</span>
                    <span class="nav-badge" id="motoristasCount">0</span>
                </a>
                <a href="#" class="nav-item" data-section="veiculos">
                    <span class="nav-icon">üöö</span>
                    <span class="nav-text">Ve√≠culos</span>
                    <span class="nav-badge" id="veiculosCount">0</span>
                </a>
                <a href="#" class="nav-item" data-section="relatorios">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-text">Relat√≥rios</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">AD</div>
                    <div class="user-info">
                        <span class="user-name" id="userName">Administrador</span>
                        <span class="user-role">Gestor de Frota</span>
                    </div>
                </div>
                <button class="btn btn-outline btn-sm full-width" id="logoutBtn" style="margin-top: 10px;">
                    <span class="btn-icon">üö™</span>
                    Sair
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="top-header">
                <div class="header-left">
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                    <p class="page-subtitle" id="pageSubtitle">Vis√£o geral da opera√ß√£o log√≠stica</p>
                </div>
                <div class="header-actions">
                    <div class="search-box">
                        <input type="text" placeholder="Buscar carregamentos, motoristas..." class="search-input">
                        <span class="search-icon">üîç</span>
                    </div>
                    <button class="btn btn-primary btn-export" id="exportBtn">
                        <span class="btn-icon">üìä</span>
                        Exportar Excel
                    </button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="section active">
                <!-- Stats Overview -->
                <div class="stats-overview">
                    <div class="stat-card large">
                        <div class="stat-header">
                            <h3>Faturamento Total</h3>
                            <span class="stat-trend positive">+12%</span>
                        </div>
                        <div class="stat-value" id="dashboardTotalMensal">R$ 0,00</div>
                        <div class="stat-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 75%"></div>
                            </div>
                            <span class="progress-text">Performance da frota</span>
                        </div>
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üì¶</div>
                            <div class="stat-content">
                                <div class="stat-value" id="dashboardCarregamentos">0</div>
                                <div class="stat-label">Carregamentos</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-content">
                                <div class="stat-value" id="dashboardMotoristas">0</div>
                                <div class="stat-label">Motoristas Ativos</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-content">
                                <div class="stat-value" id="dashboardDias">0</div>
                                <div class="stat-label">Dias Produtivos</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üöö</div>
                            <div class="stat-content">
                                <div class="stat-value" id="dashboardVeiculos">0</div>
                                <div class="stat-label">Ve√≠culos</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- M√©tricas R√°pidas -->
                <div class="metricas-rapidas" id="metricasRapidas">
                    <div class="metric-card">
                        <div class="metric-icon">üí∞</div>
                        <div class="metric-info">
                            <div class="metric-value" id="faturamentoHoje">R$ 0,00</div>
                            <div class="metric-label">Faturamento Hoje</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üì¶</div>
                        <div class="metric-info">
                            <div class="metric-value" id="carregamentosHojeDashboard">0</div>
                            <div class="metric-label">Carregamentos Hoje</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚è≥</div>
                        <div class="metric-info">
                            <div class="metric-value" id="carregamentosPendentes">0</div>
                            <div class="metric-label">Pendentes</div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Grid -->
                <div class="content-grid">
                    <!-- Recent Activity -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>üì¶ Carregamentos Recentes</h3>
                            <button class="btn-link" onclick="app.mudarSecao('carregamentos')">Ver todos</button>
                        </div>
                        <div class="activity-list" id="recentActivity">
                            <!-- Atividade recente ser√° carregada via JS -->
                        </div>
                    </div>

                    <!-- Gr√°fico de Compara√ß√£o -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>üìà Compara√ß√£o por Motorista</h3>
                            <button class="btn-link" onclick="app.mudarSecao('relatorios')">Ver relat√≥rio</button>
                        </div>
                        <div class="chart-container">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                    </div>

                    <!-- Motoristas com Maiores Valores -->
                    <div class="content-card full-width">
                        <div class="card-header">
                            <h3>‚≠ê Motoristas com Maiores Valores</h3>
                            <button class="btn-link" onclick="app.mudarSecao('motoristas')">Ver todos</button>
                        </div>
                        <div class="drivers-grid" id="featuredDrivers">
                            <!-- Motoristas destaque ser√° carregado via JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Carregamentos -->
            <section id="carregamentos-section" class="section">
                <div class="section-header">
                    <div class="header-content">
                        <h1>üì¶ Gest√£o de Carregamentos</h1>
                        <p>Controle completo dos carregamentos da frota</p>
                    </div>
                    <button class="btn btn-primary btn-lg" id="novoCarregamentoBtn">
                        <span class="btn-icon">‚ûï</span>
                        Novo Carregamento
                    </button>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="quick-stat">
                        <span class="stat-number" id="totalCarregamentos">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="carregamentosHoje">0</span>
                        <span class="stat-label">Hoje</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="carregamentosSemana">0</span>
                        <span class="stat-label">Esta Semana</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="valorTotal">R$ 0,00</span>
                        <span class="stat-label">Valor Total</span>
                    </div>
                </div>

                <!-- Form Section -->
                <div class="content-card" id="carregamentoFormCard">
                    <div class="card-header">
                        <h3>üìã Registrar Novo Carregamento</h3>
                    </div>
                    <form id="carregamentoForm" class="form modern-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="motorista">üë§ Motorista *</label>
                                <select id="motorista" required class="modern-select">
                                    <option value="">Selecione um motorista</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="veiculo">üöö Ve√≠culo *</label>
                                <select id="veiculo" required class="modern-select">
                                    <option value="">Selecione um ve√≠culo</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="data">üìÖ Data *</label>
                                <input type="date" id="data" required class="modern-input">
                            </div>
                            <div class="form-group">
                                <label for="rota">üõ£Ô∏è Rota *</label>
                                <input type="text" id="rota" placeholder="Ex: SP-RJ" required class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="numeroCarregamento">üî¢ N√∫mero do Carregamento *</label>
                                <input type="text" id="numeroCarregamento" placeholder="Ex: 166784/145698" required
                                    class="modern-input">
                            </div>
                            <div class="form-group">
                                <label for="valor">üí∞ Valor (R$) *</label>
                                <input type="number" id="valor" step="0.01" placeholder="0,00" required
                                    class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="status">üìä Status</label>
                                <select id="status" class="modern-select">
                                    <option value="Pendente">Pendente</option>
                                    <option value="Em Tr√¢nsito">Em Tr√¢nsito</option>
                                    <option value="Entregue">Entregue</option>
                                    <option value="Cancelado">Cancelado</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <span class="btn-icon">üíæ</span>
                                Salvar Carregamento
                            </button>
                            <button type="button" class="btn btn-outline" id="limparBtn">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Limpar
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Table Section -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>üìä Todos os Carregamentos</h3>
                        <div class="card-actions">
                            <button class="btn btn-danger" id="limparTodosBtn">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Limpar Todos
                            </button>
                        </div>
                    </div>

                    <div class="table-container modern-table">
                        <table id="carregamentosTable" class="data-table">
                            <thead>
                                <tr>
                                    <th>Motorista</th>
                                    <th>Ve√≠culo</th>
                                    <th>Data</th>
                                    <th>Rota</th>
                                    <th>N¬∫ Carregamento</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th width="120">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- Dados ser√£o inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="table-footer">
                        <div class="total-registros">
                            üìã Total de registros: <strong id="totalRegistros">0</strong>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Motoristas -->
            <section id="motoristas-section" class="section">
                <div class="section-header">
                    <div class="header-content">
                        <h1>üë• Gest√£o de Motoristas</h1>
                        <p>Cadastro e controle da equipe de motoristas</p>
                    </div>
                </div>

                <!-- Motoristas Stats -->
                <div class="quick-stats">
                    <div class="quick-stat">
                        <span class="stat-number" id="totalMotoristas">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="motoristasAtivos">0</span>
                        <span class="stat-label">Ativos</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="motoristasInativos">0</span>
                        <span class="stat-label">Inativos</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="vtTotalMotoristas">R$ 0,00</span>
                        <span class="stat-label">VT Total</span>
                    </div>
                </div>

                <!-- Formul√°rio de Motorista -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>üë§ Cadastrar Novo Motorista</h3>
                    </div>
                    <form id="motoristaForm" class="form modern-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nomeMotorista">üë§ Nome Completo *</label>
                                <input type="text" id="nomeMotorista" placeholder="Digite o nome do motorista" required
                                    class="modern-input">
                            </div>
                            <div class="form-group">
                                <label for="cpf">üîê CPF *</label>
                                <input type="text" id="cpf" placeholder="000.000.000-00" required class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="telefone">üì± Telefone</label>
                                <input type="tel" id="telefone" placeholder="(00) 00000-0000" class="modern-input">
                            </div>
                            <div class="form-group">
                                <label for="cnh">üö¶ CNH *</label>
                                <input type="text" id="cnh" placeholder="N√∫mero da CNH" required class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="categoriaCnh">üìÑ Categoria CNH</label>
                                <select id="categoriaCnh" class="modern-select">
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="vtDiario">üöå VT Di√°rio (R$) *</label>
                                <input type="number" id="vtDiario" step="0.01" value="9.00" required
                                    class="modern-input">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-lg" id="submitMotoristaBtn">
                                <span class="btn-icon">üë•</span>
                                Cadastrar Motorista
                            </button>
                            <button type="button" class="btn btn-outline" id="limparMotoristaBtn">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Limpar
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Tabela de Motoristas -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>üìã Motoristas Cadastrados</h3>
                    </div>

                    <div class="table-container modern-table">
                        <table id="motoristasTable" class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>CPF</th>
                                    <th>Telefone</th>
                                    <th>VT Di√°rio</th>
                                    <th>Status</th>
                                    <th width="160">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="motoristasBody">
                                <!-- Dados ser√£o inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Ve√≠culos -->
            <section id="veiculos-section" class="section">
                <div class="section-header">
                    <div class="header-content">
                        <h1>üöö Gest√£o de Ve√≠culos</h1>
                        <p>Controle completo da frota de ve√≠culos</p>
                    </div>
                    <button class="btn btn-primary btn-lg" id="novoVeiculoBtn">
                        <span class="btn-icon">‚ûï</span>
                        Novo Ve√≠culo
                    </button>
                </div>

                <!-- Ve√≠culos Stats -->
                <div class="quick-stats">
                    <div class="quick-stat">
                        <span class="stat-number" id="totalVeiculos">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="veiculosAtivos">0</span>
                        <span class="stat-label">Ativos</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="veiculosManutencao">0</span>
                        <span class="stat-label">Manuten√ß√£o</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number" id="veiculosDisponiveis">0</span>
                        <span class="stat-label">Dispon√≠veis</span>
                    </div>
                </div>

                <!-- Formul√°rio de Ve√≠culo -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>üöö Cadastrar Novo Ve√≠culo</h3>
                    </div>
                    <form id="veiculoForm" class="form modern-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="placa">üî¢ Placa *</label>
                                <input type="text" id="placa" placeholder="ABC-1D23" required class="modern-input"
                                    style="text-transform: uppercase">
                            </div>
                            <div class="form-group">
                                <label for="modelo">üöô Modelo *</label>
                                <input type="text" id="modelo" placeholder="Modelo do ve√≠culo" required
                                    class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="marca">üè≠ Marca *</label>
                                <input type="text" id="marca" placeholder="Marca do ve√≠culo" required
                                    class="modern-input">
                            </div>
                            <div class="form-group">
                                <label for="ano">üìÖ Ano *</label>
                                <input type="number" id="ano" placeholder="2024" required class="modern-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="tipo">üì¶ Tipo de Ve√≠culo</label>
                                <select id="tipo" class="modern-select">
                                    <option value="Caminh√£o">Caminh√£o</option>
                                    <option value="Carreta">Carreta</option>
                                    <option value="VUC">VUC</option>
                                    <option value="Bitrem">Bitrem</option>
                                    <option value="Rodotrem">Rodotrem</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="statusVeiculo">üìä Status</label>
                                <select id="statusVeiculo" class="modern-select">
                                    <option value="Dispon√≠vel">Dispon√≠vel</option>
                                    <option value="Manuten√ß√£o">Manuten√ß√£o</option>
                                    <option value="Em Uso">Em Uso</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <span class="btn-icon">üíæ</span>
                                Cadastrar Ve√≠culo
                            </button>
                            <button type="button" class="btn btn-outline" id="limparVeiculoBtn">
                                <span class="btn-icon">üóëÔ∏è</span>
                                Limpar
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Lista de Ve√≠culos -->
                <div class="content-card">
                    <div class="card-header">
                        <h3>üìã Frota de Ve√≠culos</h3>
                    </div>

                    <div class="table-container modern-table">
                        <table id="veiculosTable" class="data-table">
                            <thead>
                                <tr>
                                    <th>Placa</th>
                                    <th>Modelo</th>
                                    <th>Marca</th>
                                    <th>Ano</th>
                                    <th>Tipo</th>
                                    <th>Status</th>
                                    <th width="140">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="veiculosBody">
                                <!-- Dados ser√£o inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Se√ß√£o Relat√≥rios Anal√≠ticos -->
            <section id="relatorios-section" class="section">
                <div class="container">
                    <div class="section-header">
                        <h2>üìä Relat√≥rios Anal√≠ticos</h2>
                        <p>An√°lise detalhada do desempenho da opera√ß√£o</p>
                    </div>

                    <!-- Filtros do Relat√≥rio -->
                    <div class="card">
                        <div class="card-header">
                            <h3>üîç Filtros do Relat√≥rio</h3>
                        </div>
                        <div class="card-body">
                            <div class="filtros-grid">
                                <div class="filtro-group">
                                    <label for="filtroMotorista">Motorista</label>
                                    <select id="filtroMotorista" class="form-select">
                                        <option value="">Todos os motoristas</option>
                                    </select>
                                </div>
                                <div class="filtro-group">
                                    <label for="filtroVeiculo">Ve√≠culo</label>
                                    <select id="filtroVeiculo" class="form-select">
                                        <option value="">Todos os ve√≠culos</option>
                                    </select>
                                </div>
                                <div class="filtro-group">
                                    <label for="filtroDataInicio">Data In√≠cio</label>
                                    <input type="date" id="filtroDataInicio" class="form-input">
                                </div>
                                <div class="filtro-group">
                                    <label for="filtroDataFim">Data Fim</label>
                                    <input type="date" id="filtroDataFim" class="form-input">
                                </div>
                            </div>
                            <div class="filtros-actions">
                                <button id="aplicarFiltros" class="btn btn-primary">
                                    ‚úÖ Aplicar Filtros
                                </button>
                                <button id="limparFiltros" class="btn btn-secondary">
                                    üóëÔ∏è Limpar Filtros
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Legenda Executiva -->
                    <div class="metricas-rapidas" id="metricasRelatorios">
                        <div class="metric-card">
                            <div class="metric-icon">üí∞</div>
                            <div class="metric-info">
                                <div class="metric-value" id="relatorioFaturamento">R$ 0,00</div>
                                <div class="metric-label">Faturamento Total</div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">üìä</div>
                            <div class="metric-info">
                                <div class="metric-value" id="relatorioTicketMedio">R$ 0,00</div>
                                <div class="metric-label">Ticket M√©dio</div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">üìÖ</div>
                            <div class="metric-info">
                                <div class="metric-value" id="relatorioDiasTrabalhados">0</div>
                                <div class="metric-label">Dias Trabalhados</div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">üë•</div>
                            <div class="metric-info">
                                <div class="metric-value" id="relatorioMotoristasAtivos">0</div>
                                <div class="metric-label">Motoristas Ativos</div>
                            </div>
                        </div>
                    </div>

                    <!-- Gr√°fico de Relat√≥rios -->
                    <div class="card">
                        <div class="card-header">
                            <h3>üìà An√°lise de Desempenho</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="relatorioChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Relat√≥rios Detalhados -->
                    <div class="card">
                        <div class="card-header">
                            <h3>üìã Relat√≥rio Detalhado por Motorista</h3>
                            <button id="exportRelatorioBtn" class="btn btn-success">
                                üì§ Exportar Relat√≥rio
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Motorista</th>
                                            <th>Carregamentos</th>
                                            <th>Faturamento</th>
                                            <th>Dias Trabalhados</th>
                                            <th>VT Di√°rio</th>
                                            <th>VT Total</th>
                                            <th>Ticket M√©dio</th>
                                            <th>Efici√™ncia</th>
                                        </tr>
                                    </thead>
                                    <tbody id="relatorioBody">
                                        <tr>
                                            <td colspan="8" class="empty-state">
                                                <div class="empty-icon">üìä</div>
                                                <h3>Nenhum dado para exibir</h3>
                                                <p>Aplique os filtros para gerar o relat√≥rio.</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Resumo de Ve√≠culos -->
                    <div class="card">
                        <div class="card-header">
                            <h3>üöö Estat√≠sticas da Frota</h3>
                        </div>
                        <div class="card-body">
                            <div class="stats-grid" id="estatisticasFrota">
                                <div class="stat-item">
                                    <div class="stat-value" id="totalVeiculosRelatorio">0</div>
                                    <div class="stat-label">Total de Ve√≠culos</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="veiculosDisponiveisRelatorio">0</div>
                                    <div class="stat-label">Ve√≠culos Dispon√≠veis</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="veiculosManutencaoRelatorio">0</div>
                                    <div class="stat-label">Em Manuten√ß√£o</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="taxaUtilizacaoRelatorio">0%</div>
                                    <div class="stat-label">Taxa de Utiliza√ß√£o</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/motoristas.js"></script>
    <script src="js/veiculos.js"></script>
    <script src="js/carregamentos.js"></script>
    <script src="js/export.js"></script>
    <script src="js/app.js"></script>

    <!-- Script de Corre√ß√µes Simplificado - VERS√ÉO DEFINITIVA -->
    <script>
        // Corre√ß√£o definitiva para data - FUSO HOR√ÅRIO BRAS√çLIA
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando corre√ß√µes de data...');
            
            // Fun√ß√£o definitiva para obter data de Bras√≠lia
            function obterDataBrasilia() {
                const agora = new Date();
                // M√©todo mais confi√°vel: usar toLocaleString com timezone
                const dataBrasilia = new Date(agora.toLocaleString("en-US", {timeZone: "America/Sao_Paulo"}));
                return dataBrasilia;
            }

            // Fun√ß√£o para formatar como YYYY-MM-DD
            function formatarDataInput(data) {
                const ano = data.getFullYear();
                const mes = String(data.getMonth() + 1).padStart(2, '0');
                const dia = String(data.getDate()).padStart(2, '0');
                return `${ano}-${mes}-${dia}`;
            }

            // Definir data atual no campo de data
            const dataInput = document.getElementById('data');
            if (dataInput) {
                const dataBrasilia = obterDataBrasilia();
                const dataFormatada = formatarDataInput(dataBrasilia);
                dataInput.value = dataFormatada;
                console.log('‚úÖ Data definida (Bras√≠lia):', dataFormatada, 
                           'Data UTC:', new Date().toISOString(), 
                           'Data Local:', new Date().toLocaleString());
            }

            // Monitorar mudan√ßas no formul√°rio para debug
            if (dataInput) {
                dataInput.addEventListener('change', function(e) {
                    console.log('üìÖ Data alterada pelo usu√°rio:', e.target.value);
                });
            }
        });

        // Fun√ß√£o auxiliar para inicializar data quando necess√°rio
        function inicializarDataAtual() {
            const dataInput = document.getElementById('data');
            if (dataInput && !dataInput.value) {
                const dataBrasilia = new Date(new Date().toLocaleString("en-US", {timeZone: "America/Sao_Paulo"}));
                const ano = dataBrasilia.getFullYear();
                const mes = String(dataBrasilia.getMonth() + 1).padStart(2, '0');
                const dia = String(dataBrasilia.getDate()).padStart(2, '0');
                dataInput.value = `${ano}-${mes}-${dia}`;
            }
        }

        // Atualizar estat√≠sticas da frota
        function atualizarEstatisticasFrota() {
            try {
                const veiculos = JSON.parse(localStorage.getItem('veiculos')) || [];
                const totalVeiculos = veiculos.length;
                const veiculosDisponiveis = veiculos.filter(v => v.status === 'Dispon√≠vel').length;
                const emManutencao = veiculos.filter(v => v.status === 'Manuten√ß√£o').length;
                const taxaUtilizacao = totalVeiculos > 0 ? Math.round((veiculosDisponiveis / totalVeiculos) * 100) : 0;

                const atualizarElemento = (id, valor) => {
                    const elemento = document.getElementById(id);
                    if (elemento) elemento.textContent = valor;
                };

                atualizarElemento('totalVeiculosRelatorio', totalVeiculos);
                atualizarElemento('veiculosDisponiveisRelatorio', veiculosDisponiveis);
                atualizarElemento('veiculosManutencaoRelatorio', emManutencao);
                atualizarElemento('taxaUtilizacaoRelatorio', taxaUtilizacao + '%');
                atualizarElemento('totalVeiculos', totalVeiculos);
                atualizarElemento('veiculosAtivos', veiculosDisponiveis);
                atualizarElemento('veiculosManutencao', emManutencao);
                atualizarElemento('veiculosDisponiveis', veiculosDisponiveis);
                atualizarElemento('dashboardVeiculos', totalVeiculos);

            } catch (error) {
                console.error('Erro ao atualizar estat√≠sticas da frota:', error);
            }
        }

        // Event listeners
        window.addEventListener('storage', function(e) {
            if (e.key === 'veiculos' || e.key === 'carregamentos') {
                setTimeout(atualizarEstatisticasFrota, 100);
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(atualizarEstatisticasFrota, 500);
        });

        document.addEventListener('click', function(e) {
            if (e.target.closest('[data-section="carregamentos"]')) {
                setTimeout(inicializarDataAtual, 100);
            }
        });
    </script>
</body>

</html>